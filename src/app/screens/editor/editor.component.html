<app-navigator-bar
  title="エディタ"
  [actions]="navigatorActions"
></app-navigator-bar>

<form [formGroup]="deckForm" class="expand-container hidden-scroll">
  <label for="name">
    Name
    <input
      type="text"
      id="name"
      formControlName="name"
      placeholder="JLPT N5 🍉"
    />
    <small
      class="pico-color-red-500"
      [hidden]="deckForm.get('name')?.valid || deckForm.get('name')?.pristine"
    >
      Field not valid
    </small>
  </label>

  <ng-container *ngIf="!(loadingDeck$ | async); else loadingSpinnerBlock">
    <ng-container *ngIf="hasItems; else emptyListBlock">
      <app-cards-table class="expand-container scrollable"></app-cards-table>
      <footer>
        <button
          type="button"
          [disabled]="!deckForm.valid"
          [routerLink]="'..'"
          (click)="handleCreateDeck()"
        >
          {{ submitButtonLabel }}
        </button>
      </footer>
    </ng-container>
  </ng-container>
</form>

<ng-template #loadingSpinnerBlock>
  <article aria-busy="true">Loading deck...</article>
</ng-template>

<ng-template #emptyListBlock>
  <article>
    <p><b>Oops!</b> It seems this deck is empty.</p>
    <button (click)="handleOpenDialog(-1)">Create Card</button>
    <hr />
    <p>Or import an existing .csv file</p>
    <input type="file" accept=".csv" (change)="onCsvFileSelected($event)" />
  </article>
</ng-template>
